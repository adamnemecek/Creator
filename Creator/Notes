Invariants:
- For all i, Node.inputs[i].index == i (and same for outputs)